var Holder;Holder=function(a,b,c,d){var e,f,g;return g=c(a.Epoxy.View),e=a.$,f=g.extend({initialize:function(){return this.async=e.Deferred(),this.async.promise().always(function(a){return function(){return a.remove()}}(this)),this.$modalEl=this.$el.find(".modal"),this.isShown=!1,this._bindModal()},remove:function(){return this._unbindModal(),g.prototype.remove.apply(this,arguments)},showAnimation:function(a){return this.isShown===!0?"function"==typeof a?a():void 0:(this._bindModal(),this.$modalEl.one("shown.bs.modal",function(b){return function(){return b.isShown=!0,"function"==typeof a?a():void 0}}(this)),this.$modalEl.modal("show"))},closeAnimation:function(a){return this.isShown===!1?"function"==typeof a?a():void 0:(this._unbindModal(),this.$modalEl.one("hidden.bs.modal",function(b){return function(){return b.isShown=!1,"function"==typeof a?a():void 0}}(this)),this.$modalEl.modal("hide"))},showModal:function(){return d.app.modal.show(this),this.async.promise()},ok:function(a){return null==a&&(a={}),d.app.modal.close(this,function(b){return function(){return b.async.resolve(a)}}(this)),this.async.promise()},cancel:function(a){return null==a&&(a="error"),d.app.modal.close(this,function(b){return function(){return b.async.reject(a)}}(this)),this.async.promise()},_bindModal:function(){return this._unbindModal(),this.$modalEl.on("hidden.bs.modal",function(a){return function(){return a.isShown=!1,a.cancel("hide modal")}}(this))},_unbindModal:function(){return this.$modalEl.off("hidden.bs.modal")}}),f.version="0.0.2",f},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(["backbone","underscore","backbone-mixin","common","epoxy","bootstrap"],function(a,b,c,d){return Holder(a,b,c,d)}):window.BootstrapModal=Holder(Backbone,_,MixinBackbone,common);