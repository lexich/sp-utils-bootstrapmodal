(function(){var a;a=function(a,b,c,d){var e,f,g;return g=c(a.Epoxy.View),e=a.$,f=g.extend({modal_keyboard:!1,modal_backdrop:!0,autoremove:!0,constructor:function(){var a;return a=this.initialize,this.initialize=function(b){return b||(b={}),this.autoremove=b.autoremove||this.autoremove,this.modal_backdrop=b.modal_backdrop||this.modal_backdrop,this.modal_keyboard=b.modal_keyboard||this.modal_keyboard,this.on("onClose",function(a){return function(){return setTimeout(function(){return a.autoremove?a.remove():void 0},10)}}(this)),this.async=e.Deferred(),this.async.promise().always(function(a){return function(){return a.remove()}}(this)),this.$modalEl=this.$el.find(".modal"),this.isShown=!1,this._bindModal(),null!=a?a.apply(this,arguments):void 0},g.prototype.constructor.apply(this,arguments)},remove:function(){return this._unbindModal(),g.prototype.remove.apply(this,arguments)},showAnimation:function(a){return this.isShown===!0?"function"==typeof a?a():void 0:(this._bindModal(),this.$modalEl.one("shown.bs.modal",function(b){return function(){return b.isShown=!0,"function"==typeof a?a():void 0}}(this)),this.$modalEl.modal({backdrop:this.modal_backdrop,show:!0,keyboard:this.modal_keyboard}))},closeAnimation:function(a){return this.isShown===!1?"function"==typeof a?a():void 0:(this._unbindModal(),this.$modalEl.one("hidden.bs.modal",function(b){return function(){return b.isShown=!1,"function"==typeof a?a():void 0}}(this)),this.$modalEl.modal("hide"))},showModal:function(){return d.app.modal.show(this),this.async.promise()},ok:function(a){return null==a&&(a={}),d.app.modal.close(this,function(b){return function(){return b.async.resolve(a)}}(this)),this.async.promise()},cancel:function(a){return null==a&&(a="error"),d.app.modal.close(this,function(b){return function(){return b.async.reject(a)}}(this)),this.async.promise()},setAutoremove:function(a){this.autoremove=null!=a?a:!0},_bindModal:function(){return this._unbindModal(),this.$modalEl.on("hidden.bs.modal",function(a){return function(){return a.isShown=!1,a.cancel("hide modal")}}(this))},_unbindModal:function(){return this.$modalEl.off("hidden.bs.modal")}}),f.version="0.0.6",f},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(["backbone","underscore","backbone-mixin","common","epoxy","bootstrap"],function(b,c,d,e){return a(b,c,d,e)}):window.BootstrapModal=a(Backbone,_,MixinBackbone,common)}).call(this);